<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LITTOMA çš„ä¸ªäººä¸»é¡µ</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
            <div class="lang-select-wrapper">
                <select id="lang-select">
                    <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                    <option value="en">ğŸ‡¬ğŸ‡§ English</option>
                    <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                    <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                </select>
            </div>
            <button id="theme-toggle"
                style="margin-left:16px; padding:6px 16px; border-radius:20px; border:1px solid var(--border-light); background:var(--card-light); color:var(--primary); font-weight:bold; cursor:pointer; transition:background 0.2s, color 0.2s;">ğŸŒ™
                æš—è‰²</button>
        </div>
        <img class="avatar" src="https://avatars.githubusercontent.com/u/10324313?v=4" alt="LITTOMAå¤´åƒ">
        <h1 id="name-title">LITTOMA</h1>
        <div class="intro" id="bio">My intro</div>
        <div class="section">
            <div class="section-title" id="works-title">ä¸ªäººä½œå“</div>
            <div id="works-list">æš‚æ— ä½œå“å±•ç¤º</div>
        </div>
        <div class="section contact">
            <div class="section-title" id="contact-title">è”ç³»æ–¹å¼</div>
            <a id="contact-link" href="https://github.com/LITTOMA" target="_blank">github.com/LITTOMA</a>
        </div>
    </div>
    <script src="bg-animate.js"></script>
    <script>
        // ä¸»é¢˜åˆ‡æ¢ç›¸å…³
        function setTheme(mode) {
            document.body.classList.toggle('dark', mode === 'dark');
            document.querySelector('.container').classList.toggle('dark', mode === 'dark');
            document.getElementById('lang-select').classList.toggle('dark', mode === 'dark');
            document.querySelectorAll('.work-card').forEach(card => card.classList.toggle('dark', mode === 'dark'));
            document.querySelectorAll('.section-title').forEach(el => el.classList.toggle('dark', mode === 'dark'));
            document.querySelectorAll('.contact a').forEach(el => el.classList.toggle('dark', mode === 'dark'));
            document.querySelector('.lang-select-wrapper').classList.toggle('dark', mode === 'dark');
            document.getElementById('theme-toggle').textContent = mode === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
            document.querySelectorAll('.intro').forEach(el => el.classList.toggle('dark', mode === 'dark'));
            document.querySelectorAll('.work-desc').forEach(el => el.classList.toggle('dark', mode === 'dark'));
        }

        // æ£€æµ‹ç³»ç»Ÿä¸»é¢˜
        function getSystemTheme() {
            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }

        // åˆå§‹åŒ–ä¸»é¢˜
        let currentTheme = getSystemTheme();
        setTheme(currentTheme);

        // ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
            currentTheme = e.matches ? 'dark' : 'light';
            setTheme(currentTheme);
        });

        // æ‰‹åŠ¨åˆ‡æ¢ä¸»é¢˜
        document.getElementById('theme-toggle').onclick = function () {
            currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
            setTheme(currentTheme);
        };
        // å¤šè¯­è¨€æ–‡æœ¬
        const i18n = {
            zh: {
                name: 'LITTOMA',
                worksTitle: 'ä¸ªäººä½œå“',
                worksEmpty: 'æš‚æ— ä½œå“å±•ç¤º',
                contactTitle: 'è”ç³»æ–¹å¼',
                contactLink: 'github.com/LITTOMA',
                bioFallback: 'C/C++, C#, Pythonç¨‹åºå‘˜ã€‚è§†é¢‘æ¸¸æˆæœ¬åœ°åŒ–ã€‚'
            },
            en: {
                name: 'LITTOMA',
                worksTitle: 'Projects',
                worksEmpty: 'No projects to show',
                contactTitle: 'Contact',
                contactLink: 'github.com/LITTOMA',
                bioFallback: 'C/C++, C#, Python programmer. Video game localization.'
            },
            fr: {
                name: 'LITTOMA',
                worksTitle: 'Projets',
                worksEmpty: 'Aucun projet Ã  afficher',
                contactTitle: 'Contact',
                contactLink: 'github.com/LITTOMA',
                bioFallback: 'Programmeur C/C++, C#, Python. Localisation de jeux vidÃ©o.'
            },
            ja: {
                name: 'LITTOMA',
                worksTitle: 'ä½œå“',
                worksEmpty: 'è¡¨ç¤ºã§ãã‚‹ä½œå“ã¯ã‚ã‚Šã¾ã›ã‚“',
                contactTitle: 'é€£çµ¡å…ˆ',
                contactLink: 'github.com/LITTOMA',
                bioFallback: 'C/C++, C#, Pythonãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã€‚ã‚²ãƒ¼ãƒ ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚ºã€‚'
            }
        };

        let currentLang = 'zh';
        const langSelect = document.getElementById('lang-select');
        langSelect.value = currentLang;
        langSelect.onchange = function () {
            currentLang = this.value;
            renderLang();
            renderWorks();
        };

        function renderLang() {
            const t = i18n[currentLang];
            document.getElementById('name-title').textContent = t.name;
            document.getElementById('works-title').textContent = t.worksTitle;
            document.getElementById('contact-title').textContent = t.contactTitle;
            document.getElementById('contact-link').textContent = t.contactLink;
        }

        // è‡ªåŠ¨è·å–GitHubå¤´åƒå’Œç®€ä»‹
        let githubBio = '';
        fetch('https://api.github.com/users/LITTOMA')
            .then(res => res.json())
            .then(data => {
                if (data.avatar_url) {
                    document.querySelector('.avatar').src = data.avatar_url;
                }
                if (data.bio) {
                    githubBio = data.bio;
                    document.getElementById('bio').textContent = githubBio;
                } else {
                    document.getElementById('bio').textContent = i18n[currentLang].bioFallback;
                }
            });

        // ä½œå“å¡ç‰‡å¼å±•ç¤ºï¼Œç‚¹å‡»å¡ç‰‡è·³è½¬ã€‚æ¯ç§è¯­è¨€å•ç‹¬ä¸€ä¸ª works.[lang].json æ–‡ä»¶
        let worksData = null;
        function loadWorks(lang) {
            fetch(`works.${lang}.json`)
                .then(res => res.ok ? res.json() : null)
                .then(data => {
                    if (data && Array.isArray(data.works)) {
                        worksData = data;
                        renderWorks();
                    } else {
                        // fallback to works.json
                        fetch('works.json')
                            .then(res2 => res2.ok ? res2.json() : null)
                            .then(data2 => {
                                worksData = data2;
                                renderWorks();
                            });
                    }
                });
        }

        function renderWorks() {
            const list = document.getElementById('works-list');
            list.innerHTML = '';
            if (!worksData || !Array.isArray(worksData.works) || worksData.works.length === 0) {
                list.textContent = i18n[currentLang].worksEmpty;
                return;
            }
            worksData.works.forEach(work => {
                const card = document.createElement('div');
                card.className = 'work-card';
                card.tabIndex = 0;
                card.innerHTML = `
                    <div class='work-title'>${work.name}</div>
                    <div class='work-desc'>${work.desc}</div>
                `;
                if (work.link) {
                    card.onclick = () => window.open(work.link, '_blank');
                    card.onkeydown = e => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            window.open(work.link, '_blank');
                        }
                    };
                }
                list.appendChild(card);
            });
        }

        // åˆå§‹åŠ è½½ä¸­æ–‡ä½œå“
        loadWorks(currentLang);

        // åˆ‡æ¢è¯­è¨€æ—¶é‡æ–°åŠ è½½ä½œå“
        langSelect.onchange = function () {
            currentLang = this.value;
            renderLang();
            loadWorks(currentLang);
        };

        renderLang();
    </script>
</body>

</html>